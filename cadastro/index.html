<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Teste Webhook</title>
</head>
<body>

  <form id="formulario">
    <input type="url" id="webhook_url" placeholder="Cole o webhook" required><br>
    <input type="text" name="nome_cliente" placeholder="Nome do Cliente" required><br>
    <button type="submit">Cadastrar</button>
  </form>

  <div id="mensagem"></div>

  <script>
    const form = document.getElementById('formulario');
    const msg = document.getElementById('mensagem');

    form.addEventListener('submit', function(event) {
      event.preventDefault(); // 🔒 Impede o redirecionamento
      const webhook = document.getElementById('webhook_url').value.trim();
      const data = new URLSearchParams(new FormData(form));

      fetch(webhook, {
        method: 'POST',
        body: data,
        headers: { "Content-Type": "application/x-www-form-urlencoded" }
      })
      .then(res => {
        if (res.ok) {
          msg.innerText = "✅ Sucesso!";
          form.reset();
        } else {
          msg.innerText = "❌ Erro no envio!";
        }
      })
      .catch(() => msg.innerText = "❌ Falha na conexão.");
    });
  </script>

</body>
</html>
